<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>ahoi-nodejs-client documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	      <link rel="stylesheet" href="../styles/style.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">ahoi-nodejs-client documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content class">
                   <div class="content-data">











<ol class="breadcrumb">
  <li>Classes</li>
  <li>AESCrypt</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="active">
            <a href="#info" role="tab" id="info-tab" data-toggle="tab" data-link="info">Info</a>
        </li>
        <li >
            <a href="#source" role="tab" id="source-tab" data-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="c-info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/starfinanz/ahoi/lib/crypt/aescrypt.ts</code>
        </p>





            <section>
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>
                <tr>
                    <td class="col-md-4">
                        <h6><b>Properties</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Static</span>
                                    <span class="modifier">Readonly</span>
                                <a href="#DEFAULT_IV">DEFAULT_IV</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Static</span>
                                    <span class="modifier">Readonly</span>
                                <a href="#IV_LENGTH">IV_LENGTH</a>
                            </li>
                        </ul>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Methods</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Static</span>
                                <a href="#decrypt">decrypt</a>
                            </li>
                            <li>
                                    <span class="modifier">Static</span>
                                <a href="#decryptRandomIV">decryptRandomIV</a>
                            </li>
                            <li>
                                    <span class="modifier">Static</span>
                                    <span class="modifier">Async</span>
                                <a href="#encrypt">encrypt</a>
                            </li>
                            <li>
                                    <span class="modifier">Static</span>
                                    <span class="modifier">Async</span>
                                <a href="#encryptRandomIV">encryptRandomIV</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Static</span>
                                <a href="#getEncryptionStrength">getEncryptionStrength</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Static</span>
                                <a href="#iVToBuffer">iVToBuffer</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Static</span>
                                <a href="#keyToBuffer">keyToBuffer</a>
                            </li>
                        </ul>
                    </td>
                </tr>





        </tbody>
    </table>
</section>

            <section>
    <h3 id="constructor">Constructor</h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                                <span class="modifier">Private</span>
                        <code>constructor()</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="16" class="link-to-prism">src/starfinanz/ahoi/lib/crypt/aescrypt.ts:16</a></div>
                            </td>
                        </tr>

            </tbody>
        </table>
</section>

            <section>
    
        <h3 id="inputs">
            Properties
        </h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="DEFAULT_IV"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                                <span class="modifier">Static</span>
                                <span class="modifier">Readonly</span>
                            DEFAULT_IV
                            </b>
                            <a href="#DEFAULT_IV"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span><code>DEFAULT_IV:     <code>Buffer</code>
</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code>Buffer</code>

                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Default value : </i><code>Buffer.alloc(AESCrypt.IV_LENGTH)</code>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="16" class="link-to-prism">src/starfinanz/ahoi/lib/crypt/aescrypt.ts:16</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="IV_LENGTH"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                                <span class="modifier">Static</span>
                                <span class="modifier">Readonly</span>
                            IV_LENGTH
                            </b>
                            <a href="#IV_LENGTH"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span><code>IV_LENGTH:     <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Default value : </i><code>16</code>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="14" class="link-to-prism">src/starfinanz/ahoi/lib/crypt/aescrypt.ts:14</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
</section>

            <section>
    
        <h3 id="methods">
            Methods
        </h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="decrypt"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Static</span>
                            decrypt
                            </b>
                            <a href="#decrypt"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                            <span class="modifier-icon icon ion-ios-reset"></span>
                        <code>decrypt(enctext: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, cryptkey: string | Buffer, cipher: <a href="../undefineds/Cipher.html">Cipher</a>, containsIV: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank">boolean</a>, iv?: string | Buffer)</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="78" class="link-to-prism">src/starfinanz/ahoi/lib/crypt/aescrypt.ts:78</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>Decrypts an AES encrypted text</p>
</div>

                            <div class="io-description">
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                                    <td>Default value</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>enctext</td>
                                                        <td>
                                                                    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                        <td>
                                                        </td>

                                                </tr>
                                                <tr>
                                                        <td>cryptkey</td>
                                                        <td>
                                                                    <code>string | Buffer</code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                        <td>
                                                        </td>

                                                </tr>
                                                <tr>
                                                        <td>cipher</td>
                                                        <td>
                                                                    <code><a href="../miscellaneous/enumerations.html#Cipher" target="_self" >Cipher</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                        <td>
                                                                <code>Cipher.DEFAULT</code>
                                                        </td>

                                                </tr>
                                                <tr>
                                                        <td>containsIV</td>
                                                        <td>
                                                                    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                        <td>
                                                                <code>false</code>
                                                        </td>

                                                </tr>
                                                <tr>
                                                        <td>iv</td>
                                                        <td>
                                                                    <code>string | Buffer</code>
                                                        </td>
                                                    
                                                    <td>
                                                            Yes
                                                    </td>
                                                    
                                                        <td>
                                                        </td>

                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                            <div>
                            </div>
                            <div class="io-description">
                                <b>Returns : </b>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                            </div>
                                <div class="io-description">
                                    
                                </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="decryptRandomIV"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Static</span>
                            decryptRandomIV
                            </b>
                            <a href="#decryptRandomIV"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                            <span class="modifier-icon icon ion-ios-reset"></span>
                        <code>decryptRandomIV(enctext: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, cryptkey: string | Buffer, cipher: <a href="../undefineds/Cipher.html">Cipher</a>)</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="64" class="link-to-prism">src/starfinanz/ahoi/lib/crypt/aescrypt.ts:64</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">

                            <div class="io-description">
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                                    <td>Default value</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>enctext</td>
                                                        <td>
                                                                    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                        <td>
                                                        </td>

                                                </tr>
                                                <tr>
                                                        <td>cryptkey</td>
                                                        <td>
                                                                    <code>string | Buffer</code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                        <td>
                                                        </td>

                                                </tr>
                                                <tr>
                                                        <td>cipher</td>
                                                        <td>
                                                                    <code><a href="../miscellaneous/enumerations.html#Cipher" target="_self" >Cipher</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                        <td>
                                                                <code>Cipher.DEFAULT</code>
                                                        </td>

                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                            <div>
                            </div>
                            <div class="io-description">
                                <b>Returns : </b>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                            </div>
                                <div class="io-description">
                                    
                                </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="encrypt"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Static</span>
                                <span class="modifier">Async</span>
                            encrypt
                            </b>
                            <a href="#encrypt"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                            <span class="modifier-icon icon ion-ios-reset"></span>
                        <code>encrypt(text: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, cryptkey: string | Buffer, cipher: <a href="../undefineds/Cipher.html">Cipher</a>, iv: string | Buffer, addIV: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank">boolean</a>)</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="40" class="link-to-prism">src/starfinanz/ahoi/lib/crypt/aescrypt.ts:40</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>Encrypts a string using AES.</p>
</div>

                            <div class="io-description">
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                                    <td>Default value</td>
                                                    <td>Description</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>text</td>
                                                        <td>
                                                                    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                        <td>
                                                        </td>

                                                        <td>
                                                        </td>
                                                </tr>
                                                <tr>
                                                        <td>cryptkey</td>
                                                        <td>
                                                                    <code>string | Buffer</code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                        <td>
                                                        </td>

                                                        <td>
                                                        </td>
                                                </tr>
                                                <tr>
                                                        <td>cipher</td>
                                                        <td>
                                                                    <code><a href="../miscellaneous/enumerations.html#Cipher" target="_self" >Cipher</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                        <td>
                                                                <code>Cipher.DEFAULT</code>
                                                        </td>

                                                        <td>
                                                        </td>
                                                </tr>
                                                <tr>
                                                        <td>iv</td>
                                                        <td>
                                                                    <code>string | Buffer</code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                        <td>
                                                                <code>AESCrypt.DEFAULT_IV</code>
                                                        </td>

                                                        <td>
                                                                <code><p>A {</p>
</code>
                                                        </td>
                                                </tr>
                                                <tr>
                                                        <td>addIV</td>
                                                        <td>
                                                                    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                        <td>
                                                                <code>false</code>
                                                        </td>

                                                        <td>
                                                        </td>
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                            <div>
                            </div>
                            <div class="io-description">
                                <b>Returns : </b>    <code>Promise&lt;string&gt;</code>

                            </div>
                                <div class="io-description">
                                    
                                </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="encryptRandomIV"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Static</span>
                                <span class="modifier">Async</span>
                            encryptRandomIV
                            </b>
                            <a href="#encryptRandomIV"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                            <span class="modifier-icon icon ion-ios-reset"></span>
                        <code>encryptRandomIV(text: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, cryptkey: string | Buffer, cipher: <a href="../undefineds/Cipher.html">Cipher</a>)</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="21" class="link-to-prism">src/starfinanz/ahoi/lib/crypt/aescrypt.ts:21</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">

                            <div class="io-description">
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                                    <td>Default value</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>text</td>
                                                        <td>
                                                                    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                        <td>
                                                        </td>

                                                </tr>
                                                <tr>
                                                        <td>cryptkey</td>
                                                        <td>
                                                                    <code>string | Buffer</code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                        <td>
                                                        </td>

                                                </tr>
                                                <tr>
                                                        <td>cipher</td>
                                                        <td>
                                                                    <code><a href="../miscellaneous/enumerations.html#Cipher" target="_self" >Cipher</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                        <td>
                                                                <code>Cipher.DEFAULT</code>
                                                        </td>

                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                            <div>
                            </div>
                            <div class="io-description">
                                <b>Returns : </b>    <code>Promise&lt;string&gt;</code>

                            </div>
                                <div class="io-description">
                                    
                                </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="getEncryptionStrength"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                                <span class="modifier">Static</span>
                            getEncryptionStrength
                            </b>
                            <a href="#getEncryptionStrength"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                            <span class="modifier-icon icon ion-ios-reset"></span>
                        <code>getEncryptionStrength(key: string | Buffer)</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="136" class="link-to-prism">src/starfinanz/ahoi/lib/crypt/aescrypt.ts:136</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>Get the AES encryption strength. For AES encryption allowed are only key with length 128, 192
or 256 bit.<br/>
Note: it would be more secure to throw an exception if key length does not match these
restrictions. On the other hand it is more user friendly to allow keys too, that do not match.
In this case other keys are allowed and padded or stripped to 256 bit.</p>
</div>

                            <div class="io-description">
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>key</td>
                                                        <td>
                                                                    <code>string | Buffer</code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                            <div>
                            </div>
                            <div class="io-description">
                                <b>Returns : </b>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                            </div>
                                <div class="io-description">
                                    
                                </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="iVToBuffer"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                                <span class="modifier">Static</span>
                            iVToBuffer
                            </b>
                            <a href="#iVToBuffer"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                            <span class="modifier-icon icon ion-ios-reset"></span>
                        <code>iVToBuffer(iv: string | Buffer)</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="119" class="link-to-prism">src/starfinanz/ahoi/lib/crypt/aescrypt.ts:119</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">

                            <div class="io-description">
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>iv</td>
                                                        <td>
                                                                    <code>string | Buffer</code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                            <div>
                            </div>
                            <div class="io-description">
                                <b>Returns : </b>    <code>Buffer</code>

                            </div>
                                <div class="io-description">
                                    
                                </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="keyToBuffer"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                                <span class="modifier">Static</span>
                            keyToBuffer
                            </b>
                            <a href="#keyToBuffer"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                            <span class="modifier-icon icon ion-ios-reset"></span>
                        <code>keyToBuffer(cryptKey: string | Buffer, length: number | string)</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="108" class="link-to-prism">src/starfinanz/ahoi/lib/crypt/aescrypt.ts:108</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">

                            <div class="io-description">
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                                    <td>Default value</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>cryptKey</td>
                                                        <td>
                                                                    <code>string | Buffer</code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                        <td>
                                                        </td>

                                                </tr>
                                                <tr>
                                                        <td>length</td>
                                                        <td>
                                                                    <code>number | string</code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                        <td>
                                                                <code>32</code>
                                                        </td>

                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                            <div>
                            </div>
                            <div class="io-description">
                                <b>Returns : </b>    <code>Buffer</code>

                            </div>
                                <div class="io-description">
                                    
                                </div>
                    </td>
                </tr>
            </tbody>
        </table>
</section>






    </div>


    <div class="tab-pane fade  tab-source-code" id="c-source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { error } from &#x27;console&#x27;;
import * as crypto from &#x27;crypto&#x27;;

import { Base64Util } from &#x27;./base64util&#x27;;
import { CryptUtil } from &#x27;./cryptutil&#x27;;

export enum Cipher {
  AES_CBC &#x3D; &#x27;aes-${strength}-cbc&#x27;,
  AES_CTR &#x3D; &#x27;aes-${strength}-ctr&#x27;,
  DEFAULT &#x3D; &#x27;aes-256-cbc&#x27;,
}
export class AESCrypt {

  private static readonly IV_LENGTH &#x3D; 16; // For AES, this is always 16

  private static readonly DEFAULT_IV: Buffer &#x3D; Buffer.alloc(AESCrypt.IV_LENGTH);

  // Class has only static methods, instantiation should not be possible
  private constructor() { }

  public static async encryptRandomIV(text: string,
                                      cryptkey: string | Buffer,
                                      cipher: Cipher &#x3D; Cipher.DEFAULT): Promise&lt;string&gt; {
    const iv: Buffer &#x3D; Buffer.from(
      await CryptUtil.createRandomKey(AESCrypt.IV_LENGTH), &#x27;base64&#x27;);
    return AESCrypt.encrypt(text, cryptkey, cipher, iv, true);
  }

  /**
   * Encrypts a string using AES.
   *
   * @param {string} text
   * @param {(string | Buffer)} cryptkey
   * @param {string} [cipher&#x3D;Cipher.AES_CTR]
   * @param {(string | Buffer)} [iv&#x3D;AESCrypt.DEFAULT_IV]  A {@link Buffer} or an base64 encrypted string
   * @param {boolean} [addIV&#x3D;false]
   * @returns {Promise&lt;string&gt;}
   * @memberof AESCrypt
   */
  public static async encrypt(text: string,
                              cryptkey: string | Buffer,
                              cipher: Cipher &#x3D; Cipher.DEFAULT,
                              iv: string | Buffer &#x3D; AESCrypt.DEFAULT_IV,
                              addIV: boolean &#x3D; false): Promise&lt;string&gt; {
    try {
      const bufIV &#x3D; AESCrypt.iVToBuffer(iv);
      // 128, 192 or 256 bytes
      const aesKeyLenInBytes &#x3D; AESCrypt.getEncryptionStrength(cryptkey).toString();
      // e.g. aes-256-cbc
      const useCipher &#x3D; cipher.replace(/\$\{strength\}/, aesKeyLenInBytes);
      const useCryptKey &#x3D; AESCrypt.keyToBuffer(cryptkey, useCipher);
      const cipheriv &#x3D; crypto.createCipheriv(useCipher, useCryptKey, bufIV);
      // Add IV only, if it&#x27;s randomly generated. IV is needed for decryption and must be part of the
      // encrypted text if no default is used.
      const encrypted &#x3D; addIV ? Buffer.concat([bufIV, cipheriv.update(text), cipheriv.final()])
        : Buffer.concat([cipheriv.update(text), cipheriv.final()]);
      return encrypted.toString(&#x27;base64&#x27;);
    } catch (err) {
      error(err);
      throw err instanceof Error ? err : new Error(err);
    }
  }

  public static decryptRandomIV(enctext: string,
                                cryptkey: string | Buffer,
                                cipher: Cipher &#x3D; Cipher.DEFAULT): string {
    return AESCrypt.decrypt(enctext, cryptkey, cipher, true);
  }

  /**
   * Decrypts an AES encrypted text
   *
   * @param {string} enctext
   * @param {string} [cipher&#x3D;AESCrypt.AHOI_DEFAULT_CIPHER]
   * @returns {Promise&lt;string&gt;}
   * @memberof AESCrypt
   */
  public static decrypt(enctext: string,
                        cryptkey: string | Buffer,
                        cipher: Cipher &#x3D; Cipher.DEFAULT,
                        containsIV: boolean &#x3D; false,
                        iv?: string | Buffer): string {
    try {
      const encTextBuffer &#x3D; Buffer.from(Base64Util.urlSafeBase64ToBase64(enctext), &#x27;base64&#x27;);
      let bufIV: Buffer;
      if (containsIV) {
        bufIV &#x3D; encTextBuffer.slice(0, AESCrypt.IV_LENGTH);
      } else if (iv) {
        bufIV &#x3D; AESCrypt.iVToBuffer(iv);
      } else {
        bufIV &#x3D; AESCrypt.DEFAULT_IV;
      }
      const encryptedText: Buffer &#x3D; containsIV ? encTextBuffer.slice(AESCrypt.IV_LENGTH) : encTextBuffer;
      // 128, 192 or 256 bytes
      const aesKeyLenInBytes &#x3D; AESCrypt.getEncryptionStrength(cryptkey).toString();
      // e.g. aes-256-cbc
      const useCipher &#x3D; cipher.replace(/\$\{strength\}/, aesKeyLenInBytes);
      const useCryptKey &#x3D; AESCrypt.keyToBuffer(cryptkey, useCipher);
      const decipher &#x3D; crypto.createDecipheriv(useCipher, useCryptKey, bufIV);
      return decipher.update(encryptedText, &#x27;binary&#x27;, &#x27;utf8&#x27;) + decipher.final().toString(&#x27;utf8&#x27;);
    } catch (err) {
      error(err);
      error(&#x27;Error: %o&#x27;, err);
      throw err instanceof Error ? err : new Error(err);
    }
  }

  private static keyToBuffer(cryptKey: string | Buffer, length: number | string &#x3D; 32): Buffer {
    const len &#x3D; typeof length &#x3D;&#x3D;&#x3D; &#x27;string&#x27; ? length.includes(&#x27;256&#x27;) ? 32 : 16 : length;
    let newBuffer: Buffer;
    if (cryptKey instanceof Buffer) {
      newBuffer &#x3D; Buffer.concat([cryptKey, Buffer.alloc(len)]);
    } else {
      newBuffer &#x3D; Buffer.concat([Buffer.from(cryptKey as string), Buffer.alloc(len)]);
    }
    return newBuffer.slice(0, len);
  }

  private static iVToBuffer(iv: string | Buffer): Buffer {
    const decIV: Buffer &#x3D; iv instanceof Buffer ? iv : Base64Util.urlSafeBase64Decode(iv);
    return Buffer.concat([decIV, Buffer.alloc(AESCrypt.IV_LENGTH)]).slice(0, AESCrypt.IV_LENGTH);
  }

  /**
   * Get the AES encryption strength. For AES encryption allowed are only key with length 128, 192
   * or 256 bit.&lt;br/&gt;
   * Note: it would be more secure to throw an exception if key length does not match these
   * restrictions. On the other hand it is more user friendly to allow keys too, that do not match.
   * In this case other keys are allowed and padded or stripped to 256 bit.
   *
   * @private
   * @param {(string | Buffer)} key
   * @returns {number}
   * @memberof AESCrypt
   */
  private static getEncryptionStrength(key: string | Buffer): number {
    const keyBuf: Buffer &#x3D; key instanceof Buffer ? key : Buffer.from(key);
    if (keyBuf.length &#x3D;&#x3D;&#x3D; 16 || keyBuf.length &#x3D;&#x3D;&#x3D; 24 || keyBuf.length &#x3D;&#x3D;&#x3D; 32) {
      return keyBuf.length * 8;
    }
    return 256;
  }

}
</code></pre>
    </div>
</div>







                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> result-matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'class';
            var COMPODOC_CURRENT_PAGE_URL = 'AESCrypt.html';
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>
       <!-- Required to polyfill modern browsers as code is ES5 for IE... -->
       <script src="../js/libs/custom-elements-es5-adapter.js" charset="utf-8" defer></script>
       <script src="../js/menu-wc.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
